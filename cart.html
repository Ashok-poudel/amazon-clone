<!DOCTYPE html>
<html>
<head>
    <title>Cart</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="navbar">
    <h2 style="color:white;">Shopping Cart</h2>
</header>

<div class="products" id="cart-items"></div>

<div id="cart-summary" style="padding:30px;"></div>

<script>
let cart = JSON.parse(localStorage.getItem("cart")) || [];
let container = document.getElementById("cart-items");
let summary = document.getElementById("cart-summary");

function saveCart() {
    localStorage.setItem("cart", JSON.stringify(cart));
    location.reload();
}

function increase(index) {
    cart[index].quantity += 1;
    saveCart();
}

function decrease(index) {
    if (cart[index].quantity > 1) {
        cart[index].quantity -= 1;
    }
    saveCart();
}

function removeItem(index) {
    cart.splice(index, 1);
    saveCart();
}

function calculateTotal() {
    return cart.reduce((total, item) =>
        total + item.price * item.quantity, 0);
}

if (cart.length === 0) {
    container.innerHTML = "<h2 style='grid-column:1/-1;text-align:center;'>Your cart is empty ðŸ›’</h2>";
} else {
    cart.forEach((item, index) => {
        container.innerHTML += `
        <div class="box">
            <img src="${item.image}">
            <h3>${item.name}</h3>
            <p>Price: Rs ${item.price}</p>
            <p>
                Quantity:
                <button onclick="decrease(${index})">-</button>
                ${item.quantity}
                <button onclick="increase(${index})">+</button>
            </p>
            <button onclick="removeItem(${index})">Remove</button>
        </div>
        `;
    });

    summary.innerHTML = `
        <h2>Total: Rs ${calculateTotal()}</h2>
        <button onclick="checkout()">Proceed to Checkout</button>
    `;
}

function checkout() {
    let user = localStorage.getItem("user");
    if (!user) {
        alert("Please login first!");
        window.location.href = "login.html";
    } else {
        window.location.href = "order.html";
    }
}
</script>

</body>
</html>